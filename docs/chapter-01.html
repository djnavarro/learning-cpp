<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="generator" content="pandoc">
      
      
      <title>1: A crash course in C++ and the standard library</title>
      <!-- Bootstrap -->
      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
      <!-- Font-awesome -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <!-- Styles -->
      <style> 
         html {
            position: relative;
            min-height: 100%;
         }
         body {
            color: #333;
            padding-top: 8rem;
            padding-bottom: 8rem;
         }
         h1, h2, h3, h4, h5, h6 {
            font-weight: bold;
         }         
         h1, h2, h3 {
           padding-top: 4rem;
           padding-bottom: 1rem;
           font-weight: bold;
         }
         pre {
            color: #333;
            display: block;
            padding: .75rem;
            word-break: break-all;
            word-wrap: break-word;
            white-space: pre-wrap;
            background-color: #f8f9fa;
            border: 1px solid #ccc;
            border-radius: 4px;
         }
         blockquote {
            font-weight: 400;
            font-size: 1.35rem;
            margin: 1rem 0 2rem;
            border-left: 2px solid #ccc;
            padding-left: 2rem;
         }
         .container {
            font-size: 1.1rem;
         }
         .pagination {
            font-size: .95rem;
            margin-top: 4rem;
         }
         .footer {
            background-color: #f7f7f7;
            font-size: .85rem;
            padding: .875rem 0 .875rem;
            position: absolute;
            bottom: 0;
            width: 100%;
            max-height: 6rem;
            overflow: visible;
         }
         .table {
            font-size: 1rem;
            color: inherit;
            width: auto;
            margin: auto;
         }
         .navbar {
            padding-top: .25rem;
            padding-bottom: .25rem;
         }
         .bd-navbar {
            background-color: #563d7c;
         }
         .bd-navbar .navbar-nav .nav-link {
            padding-right: .65rem;
            padding-left: .65rem;
            color: #cbbde2;
         }
         .bd-navbar .navbar-nav .nav-link.active,
         .bd-navbar .navbar-nav .nav-link:hover {
            color: #fff;
            background-color: transparent;
         }
         .bd-navbar .navbar-nav .nav-link.active {
            font-weight: 600;
         }
         .bd-toc {
            font-size: .875rem;
            top: 3rem;
            right: 0;
            position: fixed;
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
            height: calc(100vh - 4rem);
            overflow-y: auto;
         }
         .section-nav {
            padding-left: 0;
            border-left: 1px solid #eee;
         }
         .section-nav ul {
            padding-left: 1rem;
         }
         .toc-entry {
            margin-left: -15px;
            display: block;
         }
         .toc-entry a {
            display: block;
            padding: .125rem 1.5rem;
            color: #77757a;
         }
         .toc-entry a:hover {
            color: #007bff;
            text-decoration: none;
         }
         .toc-entry ul {
            list-style: none;
         }
         code span.al { /* Alert */
            color: #ff0000;
            font-weight: bold;
         }
         code span.an { /* Annotation */
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
         }
         code span.at { /* Attribute */
            color: #7d9029;
         }
         code span.bn { /* BaseN */
            color: #40a070;
         }
         code span.bu { /* BuiltIn */
            color: #06287e;
         }
         code span.cf { /* ControlFlow */
            color: #007020;
            font-weight: bold;
         }
         code span.ch { /* Char */
            color: #4070a0;
         }
         code span.cn { /* Constant */
            color: #880000;
         }
         code span.co { /* Comment */
            color: #60a0b0;
            font-style: italic;
         }
         code span.cv { /* CommentVar */
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
         }
         code span.do { /* Documentation */
            color: #ba2121;
            font-style: italic;
         }
         code span.dt { /* DataType */
            color: #902000;
         }
         code span.dv { /* DecVal */
            color: #40a070;
         }
         code span.er { /* Error */
            color: #ff0000;
            font-weight: bold;
         }
         code span.ex { /* Extension */
            color: #06287e;
         }
         code span.fl { /* Float */
            color: #40a070;
         }
         code span.fu { /* Function */
            color: #06287e;
         }
         code span.im { /* Import */
            color: #007020;
            font-weight: bold;
         }
         code span.in { /* Information */
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
         }
         code span.kw { /* Keyword */
            color: #007020;
            font-weight: bold;
         }
         code span.op { /* Operator */
            color: #666666;
         }
         code span.ot { /* Other */
            color: #007020;
         }
         code span.pp { /* Preprocessor */
            color: #bc7a00;
         }
         code span.sc { /* SpecialChar */
            color: #4070a0;
         }
         code span.ss { /* SpecialString */
            color: #bb6688;
         }
         code span.st { /* String */
            color: #4070a0;
         }
         code span.va { /* Variable */
            color: #19177c;
         }
         code span.vs { /* VerbatimString */
            color: #4070a0;
         }
         code span.wa { /* Warning */
            color: #60a0b0;
            font-weight: bold;
            font-style: italic;
         }
      </style>
         </head>
   <body>
            <div class="container">
         <h1 class="title">1: A crash course in C++ and the standard library</h1>
         <p><a href="index.html">Back to top</a></p>
<h2 id="the-hello-world-program">The hello world program</h2>
<p>As always, we start with a “hello world” program. Here’s the source:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co">// helloworld.cpp</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; <span class="st">&quot;Hello cruel world&quot;</span> &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>; </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>}</span></code></pre></div>
<p>That’s all well and good, but I can’t do anything useful with this until I compile it, and for that to happen I need a C++ compiler. As it happens I already have g++ on my system, but – for no particular reason – I’ve decided to use clang. Installing clang on Ubuntu is pretty straightforward:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="fu">sudo</span> apt install clang</span></code></pre></div>
<p>Now that I have a compiler, I need to actually compile it. Here’s the command:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="fu">clang</span>++ -std=c++20 helloworld.cpp -o helloworld</span></code></pre></div>
<p>Well, more precisely, because I don’t want my binaries in the same folder as my source code:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="fu">clang</span>++ --std=c++20 ./source/01/helloworld.cpp -o ./binaries/01/helloworld</span></code></pre></div>
<p>The <code>-std=c++20</code> flag tells clang what version of C++ I’m using, and the <code>-o</code> flag is used to specify the output file. Since I don’t want to commit any binaries to my git repo, I’ll add the <code>binaries</code> folder to the <code>.gitignore</code> file. Fantastic.</p>
<p>From this point, I can invoke the executable at the terminal quite simply:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="ex">./helloworld</span></span></code></pre></div>
<p>And out pops the “Hello cruel message” at the console. Excellent. The basics are working.</p>
<h2 id="notes-on-the-hello-world-program">Notes on the hello world program</h2>
<p>Thankfully, I’ve written enough C++ code in the past that nothing about this surprises me. A few very basic syntactic notes in case I ever happen to share this with someone else coming from R.</p>
<ul>
<li>Comments in C++ are specified using <code>//</code></li>
<li>Lines must end with the semicolon <code>;</code></li>
<li>The <code>main()</code> function is special: that’s the entry point to your program. This is the function that gets called whenever you invoke the executable at the command line.</li>
<li>Unlike R, C++ is strongly typed, so when you define a function you must specify the output type: so in this case I write <code>int main() { // blah }</code> to specify that the output is an integer</li>
<li>C++ uses namespaces. In R you often see namespaces as package names (e.g., <code>dplyr::filter</code>), and <code>::</code> functions similarly here. When I write <code>std::cout</code>, I’m roughly saying “cout, which lives in the std namespace”.</li>
<li>The <code>#include</code> line is a “preprocessor directive”, used to specify meta-information about the program. In this case, it’s telling the preprocessor to take everything in the <code>&lt;iostream&gt;</code> header file and make it available to the program. Without it, I can’t do any input/output</li>
<li>In theory, since this is C++20, I could have written <code>import &lt;iostream&gt;;</code> instead of using the <code>#include</code> preprocessor directive. This is because C++20 supports for modules. I’m being a bit old-fashioned here.</li>
</ul>
<p>Going a little deeper:</p>
<ul>
<li><code>std::cout</code> refers to “standard out” (stdout), basically the place where we write output to the console. The metaphor used in the book is to think of it as a “chute” where you toss text.</li>
<li>The <code>&lt;&lt;</code> operator is used to “toss data into the chute”, so <code>std::cout &lt;&lt; "hello"</code> passes the text string <code>"hello"</code> to the standard output. As the helloworld program illustrates, you can concatenate multiple <code>&lt;&lt;</code> operations</li>
<li><code>std::endl</code> represents the end-of-line.</li>
</ul>
<p>If you don’t particularly want to namespace every command, as per <code>std::cout</code>, you can tell the compiler to make the names in a particular namespace available with a <code>using</code> directive (not dissimilar to calling <code>library()</code> in R). So I could have written my helloworld program like this:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="co">// helloworld-using.cpp</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="kw">using</span> <span class="kw">namespace</span> std;</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true"></a>    cout &lt;&lt; <span class="st">&quot;Hello cruel world&quot;</span> &lt;&lt; endl;</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>; </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>In general though it’s not a good idea because that leads to namespace conflicts pretty quickly.</p>
<h2 id="variables-types-and-casting">Variables, types, and casting</h2>
<p>Yes yes C++ is strongly typed and has many types. This I know. The book gives this as example code. The idea being that you should be able to reason through the steps that the program is following, what cast operations are taking place, and thereby predict what it will print out at the end.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="co">// typecasting.cpp</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>    <span class="co">// variable declarations</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a>    <span class="dt">int</span> someInteger;</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a>    <span class="dt">short</span> someShort;</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a>    <span class="dt">long</span> someLong;</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a>    <span class="dt">float</span> someFloat;</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true"></a>    <span class="dt">double</span> someDouble;</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true"></a>    <span class="co">// some operations that involve casts</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true"></a>    someInteger = <span class="dv">256</span>;</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true"></a>    someInteger++;</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true"></a>    someShort = <span class="kw">static_cast</span>&lt;<span class="dt">short</span>&gt;(someInteger);</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true"></a>    someLong = someShort * <span class="dv">10000</span>;</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true"></a>    someFloat = someLong + <span class="fl">0.785</span><span class="bu">f</span>;</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true"></a>    someDouble = <span class="kw">static_cast</span>&lt;<span class="dt">double</span>&gt;(someFloat) / <span class="dv">100000</span>;</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true"></a>    <span class="co">// print output and return</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true"></a>    <span class="bu">std::</span>cout &lt;&lt; someDouble &lt;&lt; <span class="bu">std::</span>endl;</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true"></a>}</span></code></pre></div>
<p>Okay, I’ll give it a go. Stepping through it line by line…</p>
<ul>
<li>We start out with a signed 32 bit integer <code>someInteger</code> which has value 256.</li>
<li>The <code>++</code> operator increments this to 257.</li>
<li>We then use <code>static_cast()</code> to cast it to a signed 16 bit integer and store this as <code>someShort</code>.</li>
<li>In the next line we’re multiplying by 10000, which gives us an answer of 2570000. That’s too large a number to store as a 16 bit integer, but there’s an implicit cast happening here (called coercion). The <code>someLong</code> variable is typed as a long integer (also 32 bits) so no explicit cast is needed, and the result is stored as a long integer with value 2570000.</li>
<li>The next line also involves an implicit cast. We’re adding a float (<code>0.785f</code>) to a long integer and storing the result as a float. So <code>someFloat</code> has value 2570000.785.</li>
<li>Finally, we explicitly cast <code>someFloat</code> to a double precision floating point number, divide it by 100000, and assign the result to <code>someDouble</code>. That gives us a value of 25.70000785</li>
</ul>
<p>We’ve lost a little precision in the printed output, however, because the program prints 25.7 to stdout.</p>      </div>
            <!-- JS, Popper.js, and jQuery -->
      <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
      <!-- Mathjax -->
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script>
         /* Bootstrap styles to tables */
         function bootstrapStylePandocTables() {
         $('tr.header').parent('thead').parent('table').addClass('table table-condensed'); }
         $(document).ready(function () { bootstrapStylePandocTables(); });
         /* Adjust the height when click the toc */
         var shiftWindow = function() { scrollBy(0, -60) };
         window.addEventListener("hashchange", shiftWindow);
         function load() { if (window.location.hash) shiftWindow(); }
      </script>
   </body>
</html>
